# **Stwitter System Project**

Stwitter is a simplified social media service that allows a user to create posts, search for posts by name of the poster or an id number, and add comments to posts that have been created. The Stwitter service has been designed with Microservices, Feign client, a Comment Queue Consumer, Caching, Spring Cloud Config Server and Eureka Service Registry.

## System Design

The Stwitter Service is the edge service with which end user applications (web and mobile) interact. End users are not aware of any other parts of the system.

![image](images/stwitter-system.png)

## General Requirements

1. All services must use the Config Server for their configuration settings.
2. All services must register with Eureka.
3. All web service to web service communication must be done using a Feign client.
4. All services must have a complete set of unit/integration tests.
5. All data must be cached as appropriate.

## Component Specifications

### Spring Cloud Config Server
Run the Config Server on port 1999.

### Eureka
Run Eureka in the standard configuration.

### Stwitter Service
The Stwitter Service is the edge service with which end user applications (web and mobile) interact. End users are not aware of any other parts of the system. Run the Stwitter Service on port 8889.

##### REST API

```
Create Post
===========
URI: /posts
HTTP Method: POST
RequestBody: Post data (minus ID)
ResponseBody: Post data (including autogenerated ID)

Get Post
========
URI: /posts/{id}
HTTP Method: GET
RequestBody: None
ResponseBody: Post data

Get Posts for Poster
====================
URI: /posts/user/{poster_name}
HTTP Method: GET
RequestBody: None
ResponseBody: Array of Post data

```

### Post Service
The Post Service is responsible for Post CRUD functionality.
Run the Post Service on port 1777.

##### Database

```sql
create schema if not exists post;
use post;

create table if not exists post (
	post_id int not null auto_increment primary key,
    post_date date not null,
    poster_name varchar(50) not null,
    post varchar(255)
);
```

### Comment Service
The Comment Service is responsible for Comment CRUD functionality.
Run the Comment Service on port 6868.

##### Database

```sql
create schema if not exists comment;
use comment;

create table if not exists comment (
	comment_id int not null auto_increment primary key,
    post_id int not null,
    create_date date not null,
    commenter_name varchar(50) not null,
    comment varchar(255)
);
```

### Comment Queue Consumer
The Comment Queue Consumer grabs new Comments off the queue and sends them to the Create Comment endpoint of the Comment Service.

##### Queue Specs

Queue Name: comment-queue

Exchange Name: comment-exchange

Routing Key: comment.create.#


## Running the Program

1. Open each project in IntelliJ IDEA
2. Run the Stwitter Config Server (Port: 1999)
3. Run the Stwitter Eureka Service Registry (Port: 8761)
4. Run the Comment Service (Port: 6868)
5. Run the Post Service (Port: 1777)
6. Run the Comment Queue Consumer
7. Run the Stwitter Service (Port: 8889)
8. Test the REST API using Postman

